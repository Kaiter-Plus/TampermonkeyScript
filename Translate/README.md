## 前言

### 所有脚本开源地址，欢迎 star ⭐

- gitee：[https://gitee.com/Kaiter-Plus/TampermonkeyScript](https://gitee.com/Kaiter-Plus/TampermonkeyScript)
- github：[https://github.com/Kaiter-Plus/TampermonkeyScript](https://github.com/Kaiter-Plus/TampermonkeyScript)

## 其它

<span style="color:red">如果你使用的是不能安装 Tampermonkey 或 Violentmonkey 的浏览器，比如 X 浏览器 或 via 浏览器，请点击前往 [网页翻译-扩展版本](https://greasyfork.org/zh-CN/scripts/423469-%E7%BD%91%E9%A1%B5%E7%BF%BB%E8%AF%91-%E6%89%A9%E5%B1%95%E7%89%88%E6%9C%AC) 下载该版本使用！</span>

## 1 功能介绍

### 1.1 按钮位置

- 给每个非中文的网页添加一个 google 翻译图标
  - 位置：默认<span style="color: red">右下角</span>，可以<span style="color:red">设置</span>到左下角
  - 设置：点击浏览器的油猴或者暴力猴插件图标即可看见脚本的配置选项，点击配置选项即可切换按钮的位置

### 1.2 插件实现简介

- 直接调用 Google 的翻译接口对非中文网页进行翻译.

### 1.3 主要翻译语言

- 主要翻译有：英语、日语、俄语，有需要的可以在 <code>includedLanguages</code>添加自己需要的语言，

### 1.4 接口来源

- 接口来源于[segmentfault](https://segmentfault.com/a/1190000016247035)，如侵权请联系删除谢谢！

### 1.5 使用注意

- 由于脚本调用了 Google 的翻译接口，所以可能需要<span style="color:red">科学上网</span>手段
- 由于一些网站使用了 <span style="color:red">CSP</span>，所以可能有些网站翻译不了。有些网站可以使用以下方法解决（方法来源: @"Andy AO"），使用扩展，先去掉 <span style="color:red">CSP</span>，就能够解决这类网站不能翻译的问题.下列扩展亲测可用：
  - 可以直接到扩展商店搜索<span style="color:red">Disable Content-Security-Policy </span>下载
  - 或者[点击跳转到 Crx4Chrome 下载 Disable Content-Security-Policy 3.0.0](https://www.crx4chrome.com/crx/16901/)

## 2 更新日志

### 2.1 2020 更新日志

- 2020/03/26 网页整页翻译功能
- 2020/04/13 排除纯 ip 网址
- 2020/04/14 移除翻译顶部栏
- 2020/05/01 排除百度、QQ、超星等中文网址
- 2020/05/04 修复去除上边栏网页先向下再向上跳的 Bug
- 2020/05/05 尝试修复百度出现超粗顶栏的 Bug
- 2020/05/12 添加恢复原网页的按钮，有点丑，不过希望可以先用着，有时间再看看能不能弄好看一点ヾ(≧▽≦\*)o
- 2020/05/23 稍微修改了一下恢复原网页的按钮的样式（还是不好看）
- 2020/05/26 修改脚本为原生 javascript，兼容暴力猴
- 2020/05/26 修改翻译栏样式，固定宽高，防止在一些页面上出现太宽或太高的现象
- 2020/06/06 修复火狐浏览器（firefox），内存溢出的 bug，精简了一点代码
- 2020/06/08 排除一些代码块的翻译，如果还有其它的网站的代码块需要排除，可以反馈给我，我排除一下
- 2020/06/17 修改恢复原网页按钮的样式（使用 @picasso250 的样式），排除标签 tt
- 2020/06/18 适配 Quora
- 2020/06/26 翻译和恢复按钮修改为在页面边缘附着的半透明半圆 -> 鼠标移入弹出翻译或恢复按钮
- 2020/07/02 按钮向上移动了 30 像素，经测试，点击弹出按钮的方式不太友好，故放弃
- 2020/07/23 排除优酷，防止全屏时黑屏的 bug 出现
- 2020/08/23 使用了模板字符串代替原来的普通字符串，适配了移动端，移动端 UI 待改善
- 2020/08/24 把“恢复”按钮的文字修改为“原”，稍微修改了一下移动端的布局
- 2020/09/02 添加了一个网址的翻译排除
- 2020/09/13 最近没有时间更新其它的，先做个小更新：添加了通过 meta 信息 charset 来判断是否添加翻译按钮（感谢 @qinxs）
- 2020/10/03 放假了，更新了切换按钮的配置选项，点击浏览器的油猴或者暴力猴插件图标即可看见脚本的配置选项，点击即可切换按钮的位置
- 2020/10/03 刚刚更新按钮位置配置信息时，忘记调整移动端的布局，重新调整更新一下
- 2020/11/28 更新了一下脚本描述

### 2.2 2021 更新日志

- 2021/01/14 恢复图片请求，好看一点
- 2021/01/18 解决 YY 直播界面导航栏向下顶的 bug（直接排除了 YY）
- 2021/01/27 修复在一些网页可能存在页面被导航栏遮挡的 bug
- 2021/02/01 修复手机端显示“提供更好的翻译建议”挡视野，妨碍复制的问题
- 2021/03/10
  - 排除了 acfun，防止搜索界面出现底部移动的 bug
  - 修复了使用 Dark Reader 开启夜间模式之后图片显示问题，强迫症福音
- 2021/03/11 添加了新的配置选项“切换自动检测中文”，用于开关脚本的中文检测功能
- 2021/03/13 清除图片请求，加快一点点速度，但是不影响图标的显示
- 2021/03/31 排除 pre，修复有些网页滚动消失的 bug
- 2021/04/02 上次更新后出现的 bug 更多了，暂时把代码回退为上一个版本
- 2021/07/14 排除抖音，防止可能出现的 bug
- 2021/09/19 优化开启关闭自动检测中文逻辑
- 2021/12/12 应用户反馈，去除显示“提供更好的翻译建议”弹框
- 2021/12/14 直接使用 https 获取谷歌翻译接口（防止有可能火狐浏览器无法用于翻译本地文件的 bug）@古海沉舟
- 2021/12/21 优化菜单切换逻辑，优化交互体验
- 2021/12/28 优化判断网页是否是中文逻辑

### 2.3 2022 更新日志

- 2022/01/08 修复上一个版本更新后大多数网站不能使用的 Bug, 解决一些网站开启脚本之后不能滚动
- 2022/01/10 修复访问站内 http 链接自动跳转 https 的问题
- 2022/01/18 增加排除网页元素
- 2022/03/09 增加排除网页元素
- 2022/03/19 增加配置选项【显示翻译建议】，默认关闭，打开之后通过悬浮文字可以看到原文
- 2022/03/20
  - 修复默认不是隐藏【更好的翻译选项】的 bug
  - 众望所归，终于可以不用开加速器就可以直接翻译了，速度飞快
  - 优化代码，提升获取所有语言的速度
  - 修复开启显示【更好的翻译建议】无法自动消失的 bug
- 2022/04/24 增加排除网页元素
